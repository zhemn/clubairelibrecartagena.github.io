<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Selección de licencias 2026</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      max-width: 100%;
      overflow-x: hidden;
      background-color: #f5f5f5;
    }

    .container {
      max-width: 700px;
      margin: 0 auto;
      background-color: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    h1 {
      color: #333;
      text-align: center;
      margin-bottom: 30px;
      font-size: 24px;
    }

    select {
      width: 100%;
      padding: 10px;
      margin-bottom: 20px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 14px;
    }

    label {
      display: block;
      margin-bottom: 8px;
      font-weight: bold;
      color: #555;
    }

    .form-section {
      margin-bottom: 20px;
    }

    p {
      margin: 10px 0;
      font-size: 16px;
    }

    #subtotal {
      background-color: #f9f9f9;
      padding: 20px;
      border-radius: 4px;
      margin-top: 20px;
    }

    .checkbox-container {
      display: flex;
      align-items: center;
      margin: 15px 0;
    }

    .checkbox-container input {
      width: auto;
      margin-right: 10px;
    }

    .total {
      font-size: 20px;
      font-weight: bold;
      color: #2c5282;
      margin-top: 15px;
    }

    .info-text {
      font-size: 13px;
      color: #666;
      font-style: italic;
      margin-top: 5px;
    }

    .descuento-info {
      background-color: #e8f4f8;
      padding: 10px;
      border-left: 4px solid #2c5282;
      margin: 10px 0;
      font-size: 14px;
    }
  </style>
</head>
<body>

  <div class="container">
    <h1>Calculadora de Licencias Federativas 2026<br>Club Aire Libre Cartagena</h1>

    <div class="form-section">
      <label for="federacion">Selecciona una federación:</label>
      <select id="federacion" onchange="mostrarCategorias()">
        <option value="">Elige una opción</option>
        <option value="FMRM">FMRM (Tarjeta FMRM)</option>
        <option value="FEDME">FEDME (Tarjeta FEDME)</option>
      </select>
    </div>

    <div id="categorias" class="form-section" style="display: none;">
      <label for="categoria">Selecciona una categoría:</label>
      <select id="categoria" onchange="mostrarValores()">
        <option value="">Elige una categoría</option>
      </select>
    </div>

    <div id="valores" class="form-section" style="display: none;">
      <label for="valor">Selecciona una modalidad:</label>
      <select id="valor" onchange="mostrarComplementos()">
        <option value="">Elige una modalidad</option>
      </select>
    </div>

    <div id="complementos" class="form-section" style="display: none;">
      <label for="complemento">Selecciona un complemento:</label>
      <select id="complemento" onchange="mostrarPeriodo()">
        <option value="">Elige un complemento</option>
      </select>
    </div>

    <div id="periodo" class="form-section" style="display: none;">
      <label for="periodoSelect">Selecciona el período:</label>
      <select id="periodoSelect" onchange="mostrarTarifaFinal()">
        <option value="">Elige un período</option>
        <option value="completo">Año completo</option>
        <option value="octubre">Octubre - Diciembre</option>
      </select>
    </div>

    <div id="tarifaFinal" class="form-section" style="display: none;">
      <label for="tarifa">Selecciona tu cuota de club:</label>
      <select id="tarifa" onchange="mostrarVoluntariado()">
        <option value="">Elige una opción</option>
      </select>
    </div>

    <div id="voluntariado" class="form-section" style="display: none;">
      <label for="voluntariadoSelect">¿Tienes descuento por voluntariado?</label>
      <select id="voluntariadoSelect" onchange="calcularSubtotalFinal()">
        <option value="">Elige una opción</option>
        <option value="ninguno">Sin descuento</option>
        <option value="podium1">PODIUM 1ª Posición (100% - 55,00 €)</option>
        <option value="podium2">PODIUM 2ª Posición (75% - 41,25 €)</option>
        <option value="podium3">PODIUM 3ª Posición (50% - 27,50 €)</option>
        <option value="horas48">48 Horas (100% - 55,00 €)</option>
        <option value="horas24">24 Horas (50% - 27,50 €)</option>
        <option value="horas6">6 Horas (12,50% - 6,88 €)</option>
      </select>
    </div>

    <div id="subtotal" style="display: none;">
      <p><strong>Licencia federativa:</strong> <span id="licenciaValor">0,00 €</span></p>
      <p><strong>Cuota club:</strong> <span id="cuotaValor">0,00 €</span></p>
      <p class="descuento-info" id="descuentoInfo" style="display: none;">
        <strong>Descuento por voluntariado:</strong> -<span id="descuentoValor">0,00 €</span>
      </p>
      <p><strong>Subtotal:</strong> <span id="subtotalValor">0,00 €</span></p>
      <div class="checkbox-container">
        <input type="checkbox" id="impresion" onchange="calcularSubtotalFinal()">
        <label for="impresion" style="margin: 0;">¿Impresión de tarjeta física? (+2,00 €)</label>
      </div>
      <p class="total">TOTAL A PAGAR: <span id="valorFinal">0,00 €</span></p>
    </div>
  </div>

  <script>
    var valores = {
      FMRM: {
        Infantil: {
          A: 19.50,
          B: 20.50,
          C: 28.50,
          D: 44.00,
          E: 520.00,
          OT: 16.00,
          AU: 20.00,
          HAB: 7.00,
          'Carreras por Montaña': 4.00,
          'Snow': 5.00
        },
        Juvenil: {
          A: 25.00,
          B: 42.00,
          C: 58.00,
          D: 87.50,
          E: 520.00,
          OT: 22.00,
          AU: 25.50,
          HAB: 12.00
        },
        'Adultos/Técnicos/Árbitros': {
          A: 43.00,
          B: 61.50,
          C: 103.00,
          D: 155.00,
          E: 520.00,
          OT: 36.00,
          AU: 43.50,
          HAB: 24.00
        }
      },
      FEDME: {
        Infantil: {
          A: 22.06,
          B: 23.06,
          C: 31.06,
          D: 46.56,
          E: 522.56,
          OT: 18.56
        },
        Juvenil: {
          A: 32.59,
          B: 49.59,
          C: 65.59,
          D: 95.09,
          E: 527.59,
          OT: 29.59
        },
        'Adultos/Técnicos/Árbitros': {
          A: 57.82,
          B: 76.32,
          C: 117.82,
          D: 169.82,
          E: 534.82,
          OT: 46.33
        }
      }
    };

    var cuotasClub = {
      completo: {
        'sin_hijos': 55.00,
        'con_hijos': 45.00,
        'menores': 27.50,
        'solo_federativa': 0
      },
      octubre: {
        'sin_hijos': 27.50,
        'con_hijos': 22.50,
        'menores': 13.75,
        'solo_federativa': 0
      }
    };

    var descuentosVoluntariado = {
      'ninguno': 0,
      'podium1': 55.00,
      'podium2': 41.25,
      'podium3': 27.50,
      'horas48': 55.00,
      'horas24': 27.50,
      'horas6': 6.88
    };

    function mostrarCategorias() {
      var federacion = document.getElementById('federacion').value;
      var categorias = document.getElementById('categoria');
      categorias.innerHTML = '<option value="">Elige una categoría</option>';

      if (federacion) {
        for (var categoria in valores[federacion]) {
          categorias.innerHTML += '<option value="' + categoria + '">' + categoria + '</option>';
        }
        document.getElementById('categorias').style.display = 'block';
      } else {
        ocultarSecciones(['categorias', 'valores', 'complementos', 'periodo', 'tarifaFinal', 'voluntariado', 'subtotal']);
      }
    }

    function mostrarValores() {
      var categoria = document.getElementById('categoria').value;
      var federacion = document.getElementById('federacion').value;
      var valoresSelect = document.getElementById('valor');
      valoresSelect.innerHTML = '<option value="">Elige una modalidad</option>';

      if (categoria) {
        for (var valor in valores[federacion][categoria]) {
          valoresSelect.innerHTML += '<option value="' + valor + '">' + valor + '</option>';
        }
        document.getElementById('valores').style.display = 'block';
      } else {
        ocultarSecciones(['valores', 'complementos', 'periodo', 'tarifaFinal', 'voluntariado', 'subtotal']);
      }
    }

    function mostrarComplementos() {
      var valor = document.getElementById('valor').value;
      var complementos = document.getElementById('complemento');
      complementos.innerHTML = '<option value="">Elige un complemento</option>';

      if (valor) {
        var modalidadesConComplementos = ['B', 'C', 'D', 'E'];
        
        if (modalidadesConComplementos.includes(valor)) {
          complementos.innerHTML += '<option value="BXM">Bicicleta por Montaña - 9,00 €</option>';
          complementos.innerHTML += '<option value="Esquí Alpino">Esquí Alpino - 35,50 €</option>';
          complementos.innerHTML += '<option value="Snow">Snow - 49,00 €</option>';
        }
        
        complementos.innerHTML += '<option value="NINGUNA">Ninguna</option>';
        document.getElementById('complementos').style.display = 'block';
      } else {
        ocultarSecciones(['complementos', 'periodo', 'tarifaFinal', 'voluntariado', 'subtotal']);
      }
    }

    function mostrarPeriodo() {
      var complemento = document.getElementById('complemento').value;
      
      if (complemento) {
        document.getElementById('periodo').style.display = 'block';
      } else {
        ocultarSecciones(['periodo', 'tarifaFinal', 'voluntariado', 'subtotal']);
      }
    }

    function mostrarTarifaFinal() {
      var periodo = document.getElementById('periodoSelect').value;
      var tarifa = document.getElementById('tarifa');
      
      if (periodo) {
        tarifa.innerHTML = '<option value="">Elige una opción</option>';
        
        if (periodo === 'completo') {
          tarifa.innerHTML += '<option value="sin_hijos">Mayores de 18 años sin hijos - 55,00 €</option>';
          tarifa.innerHTML += '<option value="con_hijos">Mayores de 18 años con hijos en el club - 45,00 €</option>';
          tarifa.innerHTML += '<option value="menores">Menores de 18 años - 27,50 €</option>';
        } else if (periodo === 'octubre') {
          tarifa.innerHTML += '<option value="sin_hijos">Mayores de 18 años sin hijos - 27,50 €</option>';
          tarifa.innerHTML += '<option value="con_hijos">Mayores de 18 años con hijos en el club - 22,50 €</option>';
          tarifa.innerHTML += '<option value="menores">Menores de 18 años - 13,75 €</option>';
        }
        
        tarifa.innerHTML += '<option value="solo_federativa">Solo Federativa - 0 €</option>';
        document.getElementById('tarifaFinal').style.display = 'block';
      } else {
        ocultarSecciones(['tarifaFinal', 'voluntariado', 'subtotal']);
      }
    }

    function mostrarVoluntariado() {
      var tarifa = document.getElementById('tarifa').value;
      
      if (tarifa) {
        document.getElementById('voluntariado').style.display = 'block';
      } else {
        ocultarSecciones(['voluntariado', 'subtotal']);
      }
    }

    function calcularSubtotalFinal() {
      var federacion = document.getElementById('federacion').value;
      var categoria = document.getElementById('categoria').value;
      var valor = document.getElementById('valor').value;
      var complemento = document.getElementById('complemento').value;
      var periodo = document.getElementById('periodoSelect').value;
      var tarifa = document.getElementById('tarifa').value;
      var voluntariado = document.getElementById('voluntariadoSelect').value;

      if (federacion && categoria && valor && complemento && periodo && tarifa && voluntariado) {
        // Precio base de la licencia
        var precioLicencia = valores[federacion][categoria][valor];

        // Agregar complemento
        if (complemento === 'BXM') {
          precioLicencia += 9.00;
        } else if (complemento === 'Esquí Alpino') {
          precioLicencia += 35.50;
        } else if (complemento === 'Snow') {
          precioLicencia += 49.00;
        }

        // Cuota del club
        var cuotaClub = cuotasClub[periodo][tarifa];

        // Descuento por voluntariado
        var descuento = descuentosVoluntariado[voluntariado];
        
        // Aplicar descuento (no puede ser mayor que la cuota del club)
        var descuentoAplicado = Math.min(descuento, cuotaClub);
        var cuotaFinal = Math.max(0, cuotaClub - descuentoAplicado);

        // Calcular subtotal
        var subtotal = precioLicencia + cuotaFinal;

        // Agregar impresión si está marcada
        var impresion = 0;
        var checkboxImpresion = document.getElementById('impresion');
        if (checkboxImpresion.checked) {
          impresion = 2.00;
        }

        var total = subtotal + impresion;

        // Mostrar resultados
        document.getElementById('licenciaValor').innerText = precioLicencia.toFixed(2) + ' €';
        document.getElementById('cuotaValor').innerText = cuotaClub.toFixed(2) + ' €';
        
        if (descuentoAplicado > 0) {
          document.getElementById('descuentoInfo').style.display = 'block';
          document.getElementById('descuentoValor').innerText = descuentoAplicado.toFixed(2) + ' €';
        } else {
          document.getElementById('descuentoInfo').style.display = 'none';
        }
        
        document.getElementById('subtotalValor').innerText = subtotal.toFixed(2) + ' €';
        document.getElementById('valorFinal').innerText = total.toFixed(2) + ' €';
        document.getElementById('subtotal').style.display = 'block';
      }
    }

    function ocultarSecciones(secciones) {
      secciones.forEach(function(seccion) {
        document.getElementById(seccion).style.display = 'none';
      });
    }
  </script>

</body>
</html>
